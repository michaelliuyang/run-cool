{"name":"Run Cool","tagline":"Run Cool","body":"## Welcome to Run Cool server page.\r\nThis page include 3 parts:\r\n* Prepare Environment\r\n* Configuration\r\n* Protocol Design\r\n\r\n### Prepare Environment\r\n1. Application Server\r\n   * Tomcat 6.x or 7.x OR other application servers\r\n2. DB Server\r\n  * Mysql 5.x\r\n3. JDBC Connection Pool\r\n  * The project JDBC data source used JNDI config.\r\n  * Proxool OR DBCP OR other ...\r\n4. Install Maven\r\n  * [Maven Home](http://maven.apache.org)\r\n\r\n### Configuration\r\n> You can use **terminal** to clone code or click **download button** on top of this page to get code.\r\n```\r\n$ git clone https://github.com/michaelliuyang/run-cool.git\r\n```\r\n> Go to your download folder\r\n```\r\n$ cd run-cool/run-cool-app\r\n```\r\n> Run maven command\r\n```\r\n$ mvn install\r\n```\r\n> Get war file from project target folder and deploy your application server.\r\n\r\n### Protocol Design\r\n#### Request\r\n##### Common Part Request\r\n```\r\n{\r\n    \"request\": {\r\n        \"protocol\": \"1.0\", //Protocol version\r\n        \"type\": \"\", //Request type: 1:GetArea 2:GetBattleTarget \r\n                      3:UploadResult 4:GetRanking\r\n        \"imei\":\"013354000103155\", //Device code\r\n        \"userId\": \"\", //User id\r\n        \"mobilePhone\": \"13811312013\", //Mobile phone number\r\n        \"nickName\": \"michael\", //Nick name\r\n        \"role\": {\r\n            \"name\": \"magic\", //Role name\r\n            \"rank\": \"3\" //Role rank\r\n        },\r\n        \"mounts\": {\r\n            \"name\": \"bird\", //Mounts name\r\n            \"rank\": \"8\"  //Mounts rank\r\n        },\r\n        \"pet\": {\r\n            \"name\": \"peter\" //Pet name\r\n        },\r\n        ......\r\n    }\r\n}\r\n```\r\n##### Get Arena Request\r\n```\r\n{\r\n    \"request\": {\r\n        ...Common part...\r\n        \"isGetBattleInfo\": \"0\" //0:not send 1:send  \r\n                                 Tell server is send user battle \r\n                                 history list for recent 5\r\n    }\r\n}\r\n```\r\n##### Get Battle Target Request\r\n```\r\n{\r\n    \"request\": {\r\n        ...Common part...\r\n    }\r\n}\r\n```\r\n##### Upload Battle Result Request\r\n```\r\n{\r\n    \"request\": {\r\n        ...Common part...\r\n        \"arenaId\": \"1\", //Arena id\r\n        \"battleScore\": \"320\", //Battle score\r\n        \"result\": \"W\", //Battle result W or L\r\n        \"isContinueWin\": \"0\", //Is continue win 0:No 1:Yes\r\n        \"targetUserId\": \"bc928dfd2aa911f65580b6a3e2f5192x\"\r\n    }\r\n}\r\n```\r\n##### Get Ranking Request\r\n```\r\n{\r\n    \"request\": {\r\n        ...Common part...\r\n    }\r\n}\r\n```\r\n#### Response\r\n##### Common Part Response\r\n``` \r\n{\r\n    \"response\": {\r\n        \"protocol\": \"1.0\", \r\n        \"type\": \"1\",\r\n        \"userId\": \"d2920c2eae982afd5eb40f29316e9b08\",\r\n        \"returnCode\": \"0\" //Server return code  \r\n                            0:Success 1:illegal 2:server error\r\n    }\r\n}\r\n```\r\n##### Get Arena Response\r\n```\r\n{\r\n    \"response\": {\r\n        ...common part...\r\n        \"allow\": \"0\", //Is allow join arena  0:NO 1:YES\r\n        \"joinedCount\": 0, //Joined battle count\r\n        \"props\": [  //Prop info, S:SPRINT,3 R:REVIVE,3\r\n            {\r\n                \"name\": \"S\", \r\n                \"limit\": 3\r\n            }, \r\n            {\r\n                \"name\": \"R\", \r\n                \"limit\": 3\r\n            }\r\n        ], \r\n        \"arenas\": [\r\n          {\r\n            \"arenaId\": 1, //Arena id\r\n            \"type\": \"GOLDEN\", //Arena type  GOLDEN OR DIAMOND\r\n            \"level\": \"ONE\", //Arena level   ONE OR TWO OR THREE\r\n            \"consumeMoney\": 10,  //Consume money\r\n            \"rewardMoney\": 50,  //Reward money\r\n            \"rewardScore\": 100, //Reward Score\r\n            \"continueWinAddPercent\": 0.1 //Continue win add percent\r\n          },\r\n          ......\r\n       ],\r\n       \"battleHistorys\": [ // If isGetBattleInfo equal 1\r\n        {\r\n        \"targetUser\": {\r\n          \"userId\": \"bc928dfd2aa911f65580b6a3e2f5192q\",\r\n          \"mobilePhone\": \"13811312031\",\r\n          \"nickName\": \"a1\",\r\n          \"roleName\": \"warrior\",\r\n          \"roleRank\": \"3\",\r\n          \"petName\": \"hh\",\r\n          \"mountsName\": \"vv\",\r\n          \"mountsRank\": \"1\",\r\n          \"score\": 56,\r\n          \"maxBattleScore\": 76\r\n        },\r\n        \"arenaId\": 1,\r\n        \"result\": \"LOSE\",\r\n        \"score\": 102\r\n      },\r\n      ......\r\n      ]\r\n    }\r\n}\r\n```\r\n##### Get Battle Target Response\r\n```\r\n{\r\n    \"response\": {\r\n        ...Common part...\r\n        \"battleTargetUser\": {\r\n        \"userId\": \"bc928dfd2aa911f65580b6a3e2f5192p\",\r\n        \"mobilePhone\": \"13811312055\",\r\n        \"nickName\": \"a3\",\r\n        \"roleName\": \"warrior\",\r\n        \"roleRank\": \"3\",\r\n        \"petName\": \"zz\",\r\n        \"mountsName\": \"hh\",\r\n        \"mountsRank\": \"3\",\r\n        \"score\": 100,\r\n        \"maxBattleScore\": 98\r\n      }\r\n    }\r\n}\r\n```\r\n##### Upload Battle Result Response\r\n```\r\n{\r\n    \"response\": {\r\n        ...Common part...\r\n        \"userRanking\": 1,  //User battle score ranking\r\n        \"targetRanking\": 6  //Target user battle score ranking\r\n    }\r\n}\r\n```\r\n##### Get Ranking Response\r\n```\r\n{\r\n    \"response\": {\r\n        ...Common part...\r\n        \"scoreRankingList\": [ //User score ranking\r\n          {\r\n          \"ranking\": 1,\r\n          \"userId\": \"bc928dfd2aa911f65580b6a3e2f5192l\",\r\n          \"nickName\": \"a5\",\r\n          \"role\":{\r\n            \"name\":\"\",\r\n            \"rank\":\"\"\r\n          },\r\n          \"score\": 200\r\n          },\r\n        ......\r\n        ],\r\n        \"battleScoreRankingList\": [ //User battle Score ranking\r\n          {\r\n            \"ranking\": 1,\r\n            \"userId\": \"bc928dfd2aa911f65580b6a3e2f5192l\",\r\n            \"nickName\": \"a5\",\r\n            \"role\":{\r\n              \"name\":\"\",\r\n              \"rank\":\"\"\r\n            },\r\n            \"score\": 120\r\n         },\r\n         .....\r\n        ]\r\n    }\r\n}\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}